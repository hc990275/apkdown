# 软件更新脚本说明

该脚本旨在在安卓环境（推荐 MT 管理器拓展包）下自动检测并下载多套 TVBox 相关 APK 的最新版本，同时支持自更新。以下内容概述脚本的核心功能、运行步骤与常用目录，便于快速上手与维护。

## 关键特性
- **环境检查**：在开头检测 MT 管理器拓展包是否已安装，并提示使用拓展包环境运行。
- **自我更新**：从 `hc990275/apkdown` 仓库读取最新 Release 信息，若发现新版本脚本则自动下载替换。
- **版本监控**：为 OK 版（手机/电视/Pro）与蜜蜂版（手机/电视）分别拉取对应的 JSON 或版本号文件，记录旧版本与新版本并判断是否需要更新。
- **APK 下载映射**：维护 APK 直链映射表（含 32/64 位、海信专版、安卓 4 版本、Pro 变体等），在检测到版本变更时批量下载对应文件。
- **结果汇总**：以随机彩色输出的方式展示更新摘要，并附上公众号提示信息。

## 目录与文件
- **下载目录**：`/storage/emulated/0/0网站/下载专用/影视安装包更新`
- **版本文件夹**：`${下载目录}/版本文件夹`，用于缓存各渠道的 JSON/版本号文件以便比对。
- **APK 文件**：检测到更新后会以“名称.apk”的形式保存到下载目录。

## 工作流程
1. 显示脚本版本并检查 MT 管理器拓展包。
2. 调用 GitHub API 获取最新脚本版本，必要时下载并提示重新运行。
3. 按映射表遍历各版本信息 URL，逐一下载临时 JSON/版本文件并与本地缓存比对。
4. 如果版本有变更，则更新缓存文件并按预设规则批量下载对应 APK。
5. 输出公众号信息与版本汇总报告，标记脚本执行完成。

## 使用建议
- **网络要求**：需可访问 GitHub Raw 与 API，脚本使用 `wget` 进行下载。
- **存储权限**：确保对下载目录及版本文件夹拥有读写权限。
- **运行方式**：推荐在 MT 管理器拓展包环境执行，以避免权限或指令兼容性问题。
- **异常处理**：若某个 JSON/APK 下载失败，会在终端输出对应提示，可重复运行脚本重试。

## 版本信息
- **脚本版本**：`v11.09`（写入于 `SCRIPT_VERSION` 变量）。
- **支持渠道**：OK 版（手机/电视/Pro，包括海信、安卓 4 特殊包）与蜜蜂版（手机/电视）。

如需扩展新的渠道或下载映射，可按现有 `VERSION_URLS` 与 `APK_PATHS` 结构增补键值对，并复用 `check_json_update` 与 `download_apk` 逻辑即可。
